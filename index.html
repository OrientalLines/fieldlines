<!DOCTYPE html>
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:svg="http://www.w3.org/2000/svg"
  xml:lang="ru"
>
  <head>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />

    <title>Электронное поле</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@material-tailwind/html@latest/styles/material-tailwind.css"
    />
    <link rel="stylesheet" href="index.css" />

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script
      src="EField3d/jquery.mousewheel.min.js"
      type="text/javascript"
      charset="utf-8"
    ></script>
    <script
      src="https://code.jquery.com/ui/1.13.1/jquery-ui.min.js"
      integrity="sha256-eTyxS0rkjpLEo16uXTS0uVCS4815lc40K2iVpWDvdSY="
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.5/dist/cdn.min.js"
    ></script>
    <script
      defer
      type="text/javascript"
      src="index.js"
      charset="utf-8"
    ></script>
    <script type="text/javascript" src="script.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              clifford: "#da373d",
            },
          },
        },
      };
    </script>

    <!-- firebug lite, for debugging on random browswers. -->
    <!-- <script type='text/javascript' 
          src='http://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js'></script> -->

    <style>
      @media screen and (-webkit-min-device-pixel-ratio: 0) {
        input[type="range"]::-webkit-slider-thumb {
          width: 15px;
          -webkit-appearance: none;
          appearance: none;
          height: 15px;
          cursor: ew-resize;
          background: #fff;
          box-shadow: -405px 0 0 400px #605e5c;
          border-radius: 50%;
        }
      }
    </style>
  </head>

  <body>
    <div>
      <div class="notpad" id="sim"></div>
    </div>

    <div class="flex justify-center items-center" id="controls">
      <div x-data="{ open: true }">
        <div x-show="open" class="fixed inset-0 z-50 overflow-hidden">
          <div
            x-show="open"
            x-transition:enter="transition-opacity ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition-opacity ease-in duration-300"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="absolute inset-0"
          ></div>
          <section class="absolute inset-y-0 right-0 pl-10 max-w-full flex">
            <div
              x-show="open"
              x-transition:enter="transition-transform ease-out duration-300"
              x-transition:enter-start="transform translate-x-full"
              x-transition:enter-end="transform translate-x-0"
              x-transition:leave="transition-transform ease-in duration-300"
              x-transition:leave-start="transform translate-x-0"
              x-transition:leave-end="transform translate-x-full"
              class="w-screen max-w-md"
            >
              <div class="h-full flex flex-col py-6 bg-white shadow-xl">
                <div class="flex items-center justify-between px-4">
                  <h2 class="text-xl font-semibold text-black">
                    Панель управления
                  </h2>
                  <button
                    x-on:click="open = false"
                    class="text-gray-500 hover:text-gray-700"
                  >
                    <span class="sr-only">Закрыть</span>
                    <svg
                      class="h-6 w-6"
                      x-description="Heroicon name: x"
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 6M6 6l12 12"
                      ></path>
                    </svg>
                  </button>
                </div>
                <div class="mt-4 px-4 h-full overflow-auto">
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div
                      class="bg-gray-50 hover:bg-gray-100 p-4 cursor-pointer rounded-md border border-gray-300 transition-colors duration-300"
                    >
                      <div class="grid grid-cols-2 gap-2 pb-2">
                        <button
                          q="1"
                          class="btn addcharge bg-red-600 hover:bg-red-700 cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 text-white rounded-full text-[15px] active:scale-[.97]"
                        >
                          +1
                        </button>
                        <button
                          q="2"
                          class="btn addcharge bg-red-600 hover:bg-red-700 cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 text-white rounded-full text-[15px] active:scale-[.97]"
                        >
                          +2
                        </button>
                      </div>
                      <div class="grid grid-cols-2 gap-2">
                        <button
                          q="-1"
                          class="btn addcharge bg-blue-600 hover:bg-blue-700 cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 text-white rounded-full text-[15px] active:scale-[.97]"
                        >
                          -1
                        </button>
                        <button
                          q="-2"
                          class="btn addcharge bg-blue-600 hover:bg-blue-700 cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 text-white rounded-full text-[15px] active:scale-[.97]"
                        >
                          -2
                        </button>
                      </div>
                      <p
                        class="flex py-2 px-4 h-fit overflow-auto justify-center"
                      >
                        <br />Перетащите заряды <br />На плоскость.
                      </p>
                    </div>
                    <div
                      class="bg-gray-50 hover:bg-gray-100 p-4 cursor-pointer rounded-md border border-gray-300 transition-colors duration-300"
                    >
                      <div class="col-span-1">
                        Количество вектор-линий:
                        <span id="lines_per_unit_charge">10</span><br />
                        <div
                          id="lines_slider"
                          class="pointer-events-auto rounded-lg overflow-hidden appearance-none bg-gray-400 h-3 w-128"
                        ></div>
                      </div>
                      <div class="col-span-1 py-2">
                        Метод вычислений:
                        <select
                          id="estMode"
                          class="py-1 right-0 px-2 w-fit origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none"
                          role="menu"
                          aria-orientation="vertical"
                          aria-labelledby="menu-button"
                          tabindex="-1"
                        >
                          <option value=" 1">Эйлер</option>
                          <option value="4" selected="selected">РК4</option>
                        </select>
                      </div>
                    </div>
                    <div
                      class="bg-gray-50 hover:bg-gray-100 p-4 cursor-pointer rounded-md border border-gray-300 transition-colors duration-300 grid justify-items-center"
                    >
                      <div class="m-2">
                        <button
                          class="cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 bg-gray-800 text-white rounded-lg text-[15px] active:scale-[.97]"
                          id="do-popup"
                          href="#"
                        >
                          Подробнее
                        </button>
                      </div>
                      <div class="m-2">
                        <button
                          class="cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 bg-gray-800 text-white rounded-lg text-[15px] active:scale-[.97]"
                        >
                          <a href="#" id="linktothis">
                            Ссылка на конфигурацию зарядов
                          </a>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Sidebar Footer -->
              </div>
            </div>
          </section>
        </div>
        <div
          class="flex gap-4 border border-gray-300 col-span-1 grid-cols-4 items-center px-2 bg-gray-50 rounded-lg"
        >
          <div class="m-2 col-span-1">
            <button
              x-on:click="open = true"
              class="px-4 py-2 bg-gray-800 text-white rounded-md z-3 flex items-center"
            >
              <svg
                class="w-4 h-4 mr-2"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 448 512"
              >
                <path
                  fill="#ffffff"
                  d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"
                />
              </svg>
              <span> Меню </span>
            </button>
          </div>
          <div class="m-2 col-span-1">
            <button
              class="cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 bg-gray-800 text-white rounded-lg text-[15px] active:scale-[.97] flex items-center"
              id="ctl-zoom-in"
            >
              <svg
                class="w-4 h-4 mr-2"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
                scale="0.1"
              >
                <path
                  fill="#ffffff"
                  d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"
                />
              </svg>
              <span> Приблизить </span>
            </button>
          </div>
          <div class="m-2 col-span-1">
            <button
              class="cursor-pointer px-3 py-1 shadow-lg shadow-gray-500/50 bg-gray-800 text-white rounded-lg text-[15px] active:scale-[.97] flex items-center"
              id="ctl-zoom-out"
            >
              <svg
                class="w-4 h-4 mr-2"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 512 512"
                scale="0.1"
              >
                <path
                  fill="#ffffff"
                  d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24H280c13.3 0 24-10.7 24-24s-10.7-24-24-24H136z"
                />
              </svg>
              <span> Отдалить </span>
            </button>
          </div>
          <div class="m-2 col-span-1">
            <label
              class="relative flex cursor-pointer items-center rounded-full px-3"
              for="ripple-off"
            >
              <input
                id="ctl-do-eqipotential"
                type="checkbox"
                class="before:content[''] peer relative h-5 w-5 cursor-pointer appearance-none rounded-md border border-blue-gray-200 transition-all before:absolute before:top-2/4 before:left-2/4 before:block before:h-12 before:w-12 before:-translate-y-2/4 before:-translate-x-2/4 before:rounded-full before:bg-blue-gray-500 before:opacity-0 before:transition-opacity checked:border-indigo-700 checked:bg-indigo-700 checked:before:bg-indigo-700 hover:before:opacity-10"
              />
              <div
                class="pointer-events-none absolute top-2/4 left-2/4 -translate-y-2/4 -translate-x-2/4 text-white opacity-0 transition-opacity peer-checked:opacity-100"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-3.5 w-3.5"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  stroke="currentColor"
                  stroke-width="1"
                >
                  <path
                    fill-rule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </div>
              <p class="px-2">
                Показать <br />
                эквипотенциальные линии
              </p>
            </label>
          </div>
        </div>
      </div>
    </div>
    <!-- Help and info -->
    <div id="debug"></div>

    <div id="totalenergy"></div>

    <div id="PopupWindow">
      <h3>Линии электрического поля</h3>
      <br />
      <h2>Инструкции:</h2>
      <ul>
        <li>
          Щелкните на заряде и перетащите его в новое положение, чтобы увидеть
          изменение электрического поля в зависимости от положения заряда.
        </li>
        <li>Перетащите заряд за пределы окна, чтобы удалить его.</li>
        <li>Щелкните кнопки заряда, чтобы добавить новые заряды в окно.</li>
        <!-- <li>
          Общая электростатическая энергия этой конфигурации зарядов показана в
          правом нижнем углу. Отрицательные значения представляют связанные
          состояния; положительные значения представляют неустойчивые (взрывные)
          состояния.
        </li> -->
      </ul>

      <h2>О линиях электрического поля:</h2>
      <p>
        Линии электрического поля - один из способов представления
        электрического поля. Это поле является векторным, поэтому каждая точка
        в пространстве имеет как <b>величину</b>, так и <b>направление</b>.
        Чтобы понять направление поля,  можно посмотреть на направление линий поля
        неподалеку от этой точки. Чтобы понять величину поля, посмотрите,
        сколько линий поля проходит через этот регион.
      </p>
      <p>
        Это приложение не показывает точное количество линий, так как оно бесконечно, но вы сможете получить представление о
        процессе взаимодействия электронов и протонов. Попробуйте немного переместить заряды, чтобы увидеть, как
        движутся линии поля.
      </p>
      <br />
      <h2>Для преподавателей:</h2>
      <ul>
        <li>
          Вы можете создавать пользовательские расположения, перемещая заряды
          туда, где хотите, а затем щелкните правой кнопкой мыши на кнопке
          "ссылка на эту конфигурацию". Выберите "Скопировать этот URL" и
          распределите студентам или сохраните для своего собственного
          использования.
        </li>
        <li>
          Вот полезный пример:
          <a
            href="?q1=-1,-1,-0.3
                  &q2=-1,-1,-0.15
                  &q3=-1,-1,0
                  &q4=-1,-1,0.15
                  &q5=-1,-1,0.3
                  &q6=1,1,-0.15
                  &q7=1,1,-0.3
                  &q8=1,1,0
                  &q9=1,1,0.15
                  &q10=1,1,0.3
                  &q11=-1,-1,-0.45
                  &q12=-1,-1,-0.6
                  &q14=-1,-1,0.45
                  &q15=-1,-1,0.6
                  &q16=1,1,-0.45
                  &q17=1,1,-0.6
                  &q19=1,1,0.45
                  &q20=1,1,0.6"
          >
          </a
          ><br />
        </li>
        <li>
          Для точного позиционирования формат URL-адреса следующий: <br />
          <span style="font-family: courier"
            >index.html?q1=[заряд1],[x1],[y1]&q2=[заряд2],[x2],[y2]&....</span
          ><br />
          где заряд1 - это размер первого заряда, x1 и y1 - координаты. (0,0)
          - это центр экрана.
        </li>
        <li>
          Добавьте "&lines=10", чтобы установить количество линий на единицу
          заряда равным 10.
        </li>
        <li>
          Добавьте "&hide1=1", чтобы скрыть метки на зарядах (что полезно для
          онлайн-тестов)
        </li>
      </ul>
      <br />
      <h2>О симуляции:</h2>
      <p>
        Интересно, что рисование линий электрического поля не имеет
        аналитического решения. Это приложение работает по методу 'стрельбы'.
      </p>
      <p>
        Первый заряд генерируется с набором линий электрического поля с равным
        расстоянием между ними. Эти линии затем прослеживаются в направлении
        поля до тех пор, пока линия либо не подключится к другому заряду, либо
        не уйдет далеко от границы симуляции.
      </p>
      <!-- <p>
        Однако это создает соединительные линии с некоторыми другими зарядами,
        используя некоторые из 'узлов', которые должны излучаться от этого
        заряда. Симуляция пытается быстро и грубо поработать, чтобы попытаться
        выровнять оставшиеся линии.
      </p> -->
    </div>
  </body>
</html>
